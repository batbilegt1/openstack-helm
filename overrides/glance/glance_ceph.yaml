# ~/osh/openstack-helm/overrides/glance/glance_ceph.yaml
# Purpose: Configure Glance to use Ceph RBD as the image backend.

storage: rbd

conf:
  ceph:
    enabled: true
    monitors: ["192.168.122.28:6789"]
    # Align with the secret created/managed by storage-init:
    # secret/images-rbd-keyring
    keyring_secret_name: images-rbd-keyring

  glance:
    # Glance store configuration (multi-backend style)
    glance_store:
      enabled_backends: rbd:rbd
      default_backend: rbd
      # Some components still consult 'stores' for legacy paths
      stores: rbd
    DEFAULT:
      enabled_backends: rbd:rbd

    # Backend-specific section name matches the backend id above (rbd)
    rbd:
      rbd_store_pool: images
      rbd_store_user: glance
      rbd_store_ceph_conf: /etc/ceph/ceph.conf
      rados_connect_timeout: -1
      report_rbd_errors: true